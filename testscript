# Testing scriot of mcide
#  use `. testscript [dbgl:2]` in bash to use
#  test a module by using:
#    loadmodule [module:<last>]
#  will include the dependents
#   Sample: loadmodule block/piston
#  show discription of a module by using:
#    descriptioncat [module:<last>]
#   Sample: descriptioncat container

[ -v BASH ] || {
	echo 'BASH environment required'
	false
} && {
	echo "Loaded successfully"
	export dirp=`realpath .`/run
	export dirlib=`realpath .`/lib
	export dirlog=`realpath .`/log
	export dirtmp=`realpath .`/tmp
	export dirassets=`realpath .`/assets
	mkdir -p "$dirlog" "$dirtmp"
	export MCEDITOR_dbgl=${1-2}
	export lastopmodule=editor
	function loadmodule {
		local module="${1-$lastopmodule}"
		lastopmodule="$module"
		unset MCEDITOR_INC_${module//\//_}
		. "$dirp"/"$module.sh"
	}
	function descriptioncat {
		local module="${1-$lastopmodule}"
		lastopmodule="$module"
		grep -Ew $'^[ \t]+#' "$dirp"/"${module//\//_}.sh"
	}
}
