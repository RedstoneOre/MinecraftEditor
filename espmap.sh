#! /bin/bash
[ -v "$MCEDITOR_INC_espmap" ] || {
	[ "$debug" -ge 2 ] && echo 'Espace map header loaded'
	MCEDITOR_INC_espmap=
	unset ctrlesp braesp
	declare -A ctrlesp braesp unesp
	ctrlesp['cNUL']='@'
	unesp['e@']='NUL'
	ctrlesp[$'c\001']='A'
	unesp['eA']=$'\001'
	ctrlesp[$'c\002']='B'
	unesp['eB']=$'\002'
	ctrlesp[$'c\003']='C'
	unesp['eC']=$'\003'
	ctrlesp[$'c\004']='D'
	unesp['eD']=$'\004'
	ctrlesp[$'c\005']='E'
	unesp['eE']=$'\005'
	ctrlesp[$'c\006']='F'
	unesp['eF']=$'\006'
	ctrlesp[$'c\007']='G'
	unesp['eG']=$'\007'
	ctrlesp[$'c\010']='H'
	unesp['eH']=$'\010'
	ctrlesp[$'c\013']='K'
	unesp['eK']=$'\013'
	ctrlesp[$'c\014']='L'
	unesp['eL']=$'\014'
	ctrlesp[$'c\015']='M'
	unesp['eM']=$'\015'
	ctrlesp[$'c\016']='N'
	unesp['eN']=$'\016'
	ctrlesp[$'c\017']='O'
	unesp['eO']=$'\017'
	ctrlesp[$'c\020']='P'
	unesp['eP']=$'\020'
	ctrlesp[$'c\021']='Q'
	unesp['eQ']=$'\021'
	ctrlesp[$'c\022']='R'
	unesp['eR']=$'\022'
	ctrlesp[$'c\023']='S'
	unesp['eS']=$'\023'
	ctrlesp[$'c\024']='T'
	unesp['eT']=$'\024'
	ctrlesp[$'c\025']='U'
	unesp['eU']=$'\025'
	ctrlesp[$'c\026']='V'
	unesp['eV']=$'\026'
	ctrlesp[$'c\027']='W'
	unesp['eW']=$'\027'
	ctrlesp[$'c\030']='X'
	unesp['eX']=$'\030'
	ctrlesp[$'c\031']='Y'
	unesp['eY']=$'\031'
	ctrlesp[$'c\032']='Z'
	unesp['eZ']=$'\032'
	ctrlesp[$'c\033']='['
	unesp['e[']=$'\033'
	ctrlesp[$'c\034']='\'
	unesp['e\']=$'\034'
	ctrlesp[$'c\035']=']'
	unesp['e]']=$'\035'
	ctrlesp[$'c\036']='^'
	unesp['e^']=$'\036'
	ctrlesp[$'c\037']='_'
	unesp['e_']=$'\037'
	ctrlesp[$'c\177']='?'
	unesp['e?']=$'\177'
	braesp[$'c\200']='80'
	unesp['e80']=$'\200'
	braesp[$'c\201']='81'
	unesp['e81']=$'\201'
	braesp[$'c\202']='82'
	unesp['e82']=$'\202'
	braesp[$'c\203']='83'
	unesp['e83']=$'\203'
	braesp[$'c\204']='84'
	unesp['e84']=$'\204'
	braesp[$'c\205']='85'
	unesp['e85']=$'\205'
	braesp[$'c\206']='86'
	unesp['e86']=$'\206'
	braesp[$'c\207']='87'
	unesp['e87']=$'\207'
	braesp[$'c\210']='88'
	unesp['e88']=$'\210'
	braesp[$'c\211']='89'
	unesp['e89']=$'\211'
	braesp[$'c\212']='8a'
	unesp['e8a']=$'\212'
	braesp[$'c\213']='8b'
	unesp['e8b']=$'\213'
	braesp[$'c\214']='8c'
	unesp['e8c']=$'\214'
	braesp[$'c\215']='8d'
	unesp['e8d']=$'\215'
	braesp[$'c\216']='8e'
	unesp['e8e']=$'\216'
	braesp[$'c\217']='8f'
	unesp['e8f']=$'\217'
	braesp[$'c\220']='90'
	unesp['e90']=$'\220'
	braesp[$'c\221']='91'
	unesp['e91']=$'\221'
	braesp[$'c\222']='92'
	unesp['e92']=$'\222'
	braesp[$'c\223']='93'
	unesp['e93']=$'\223'
	braesp[$'c\224']='94'
	unesp['e94']=$'\224'
	braesp[$'c\225']='95'
	unesp['e95']=$'\225'
	braesp[$'c\226']='96'
	unesp['e96']=$'\226'
	braesp[$'c\227']='97'
	unesp['e97']=$'\227'
	braesp[$'c\230']='98'
	unesp['e98']=$'\230'
	braesp[$'c\231']='99'
	unesp['e99']=$'\231'
	braesp[$'c\232']='9a'
	unesp['e9a']=$'\232'
	braesp[$'c\233']='9b'
	unesp['e9b']=$'\233'
	braesp[$'c\234']='9c'
	unesp['e9c']=$'\234'
	braesp[$'c\235']='9d'
	unesp['e9d']=$'\235'
	braesp[$'c\236']='9e'
	unesp['e9e']=$'\236'
	braesp[$'c\237']='9f'
	unesp['e9f']=$'\237'
	# mcespace <Char>
	#  set tfcres as the espaced char list
	function mceespace {
		mceec="${1:-NUL}"
		[ "${ctrlesp["c$mceec"]}" != '' ] && {
			tfcres=( ESP "${ctrlesp["c$mceec"]}" )
			return
		}
		[ "${braesp["c$mceec"]}" != '' ] && {
			tfcbraesps="${braesp["c$mceec"]}"
			tfcres=( ELB "${tfcbraesps:0:1}" "${tfcbraesps:1}" ERB )
			return
		}
		case "$mceec" in
			$'\t') tfcres=( SOT POT POT POT POT POT POT EOT ) ;;
			*) tfcres=( "$mceec" ) ;;
		esac
	}
}
